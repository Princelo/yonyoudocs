# NC流程平台槪述

## 流程平台整體架構

NC流程平台是對企業的流程進行建模的平台。其工作流模型由四部分組成，分別是過程模型、組織模型、功能模型以及信息模型（工作流相關數據）。過程模型用來定義工作流的過程邏輯，包括組成工作流的所有活動以及活動之間的依賴關係。組織模型用來定義企業人員的組織結構，包括幾種不同形式的組織元素以及每種組織元素內部的遞階層次關係。功能模型說明企業中需要完成的工作或者任務是什麼，或者說功能模型說明了企業的目標是通過哪些具體的功能活動來實現的。它確定了企業業務功能的邏輯結構和相互關係。信息模型說明了企業處理的業務對像中所包含的信息以及業務對像間的關係。
過程模型採取基於活動網絡圖的過程模型，與其他的過程模型（如事件驅動過程鏈EPC、Petri網、語義-行為模型等）比較，活動網絡圖具有直觀自然、可讀性好的特性。
NC流程平台整體框架圖如下。

![bpf-ch02-001](https://github.com/Princelo/yonyoudocs/blob/master/attachments/images/bpf-ch02-001.png?raw=true)

NC流程平台基於WFMC的標準，它包含一個核心引擎和4大接口（注：WFMC的標准中包含五大接口，NC流程平台提供了其中4個，還有1個是不同工作流管理系統之間的協同工作，目前NC流程平台沒有涉及）。
其中流程引擎是整個流程框架的核心。它負責解釋執行由流程設計器設計的流程定義。調度和監控過程中每個活動的執行，在需要人工介入的場合完成計算機應用軟件與操作人員的交互。
接口主要有這幾大類：
過程定義接口：對應流程設計器，用於對流程過程進行建模。流程定義可以引用NC系統建立的功能模型、組織模型以及各種元數據。
客戶應用接口：對應消息中心的代辦任務列表。NC用戶可從工作列表中查看到工作流引擎分配給他的工作項。通過單據動作（比如提交、審批、棄審、駁回等）來處理工作項，從而驅動流程流轉。
被調應用借口：這是流程平台和業務產品之間交互的通道。工作流引擎在流轉過程中可以調用各種自動應用，包括電子郵件、腳本以及Web服務等。對於流轉過程中涉及到的數據交換，工作流引擎將調用交換引擎根據規則進行數據映射。
管理和監控接口：NC流程平台提供了管理監控工具對運行中的流程實例和工作項進行狀態查詢和管理。
以下是流程平台各部分運行時的一個交互過程：

![bpf-ch02-002](https://github.com/Princelo/yonyoudocs/blob/master/attachments/images/bpf-ch02-002.png?raw=true)

用戶先進入消息中心選擇代辦任務，再導航到審批交互界面進行審批，然後提交審批結果給業務層，在業務層我們會調用業務組件，執行審批的業務操作。然後，審批任務被提交到任務層，任務層處理完審批任務後，驅動引擎，繼續流轉，引擎會將任務的處理結果發送給任務層，任務層再將結果返回給業務層。

## NC流程平台特性

NC的流程平台，根據不同的特點，把企業中遇到的流程分為審批流程、業務流程。
    [審批流程]：以單一單據實例作為處理對像的流程，一般不包含除網關節點外的自動節點，人工活動的內容是做審批。僅改變單據審批狀態，有待審批、審批中、已審批（通過/不通過）。
    [業務流程]：業務流程的最大特點是流程實例中上下游單據是不同的對像，id不同，單據類型可能相同也可能不同。業務流程引擎要處理上下游單據對像之間的數據映射、轉換、合併或分單。
 NC的流程平台具有以下特性：
    （1）標准的過程模型，遵循WFMC標准，為多系統的集成奠定了基礎；
    （2）預置通用的處理模式，積累NC多年應用經驗，能滿足絕大部分應用；
    （3）提供豐富的擴展，便於業務的接入和實施；
    （4）針對UAP，做了很多增強，使用UAP平台開發的產品可以很方便地實現工作流。 

## 流程平台與業務產品的關係

流程平台是業務產品的基礎平台，作為基礎構件之一包含在NC的底層應用架構中。
流程平台負責定義業務處理過程和規則並驅動業務過程的執行，產品組負責提供基礎功能組件並按照平台約束的接口規範來與之交互。從模型角度，流程平台負責管理過程模型，產品組件負責功能模型。過程模型和功能模型都以組織模型為基礎，並受權限模型約束。

## NC6流程設計相關節點

流程定義可在【企業建模平台】【流程管理】下找到流程相關的節點如下圖：

![bpf-ch02-003](https://github.com/Princelo/yonyoudocs/blob/master/attachments/images/bpf-ch02-003.png?raw=true)
